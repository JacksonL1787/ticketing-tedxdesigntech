{"version":3,"sources":["dashboard.js"],"names":["gaSeatTotal","vipSeatTotal","getSeatTotals","vipSeatsSold","gaSeatsSold","window","orders","forEach","item","seats","seat","type","$","setVIPSeats","percent","offset","rotation","text","css","setGASeats","document","ready","getWeeksRevenue","revenue","order","timestamp","Date","now","parseFloat","payment_amount","toFixed","getGARevenue","price","fee","getVIPRevenue","length","on","location","href","attr","show","index","orderData","seatsHTML","name","append","first_name","last_name","moment","format","order_id"],"mappings":"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","sourcesContent":["let gaSeatTotal = 270\nlet vipSeatTotal = 90\n\nconst getSeatTotals = () => {\n  let vipSeatsSold = 0;\n  let gaSeatsSold = 0;\n  window.orders.forEach(function(item) {\n    item.seats.forEach(function(seat) {\n      if(seat.type == \"VIP\") {\n        vipSeatsSold++\n      } else {\n        gaSeatsSold++\n      }\n    })\n  })\n  return {vipSeatsSold: vipSeatsSold, gaSeatsSold: gaSeatsSold}\n}\n\n$(function() { // Set Seats Sold Data Widgets\n  const setVIPSeats = (vipSeatsSold) => {\n    let percent = (vipSeatsSold/vipSeatTotal)*100\n    const offset = 628.318530718 - percent / 100 * 628.318530718\n    const rotation = 360 * (percent / 100)\n    $('.vip-seats-sold-widget .seats-sold').text(vipSeatsSold)\n    $('.vip-seats-sold-widget .seats-left').text(vipSeatTotal - vipSeatsSold)\n    $('.vip-seats-sold-widget .g2').css('stroke-dashoffset', offset)\n    $('.vip-seats-sold-widget .marker').css('transform', `rotate(${rotation}deg)`)\n  }\n\n  const setGASeats= (gaSeatsSold) => {\n    let percent = (gaSeatsSold/gaSeatTotal)*100\n    const offset = 628.318530718 - percent / 100 * 628.318530718\n    const rotation = 360 * (percent / 100)\n    $('.ga-seats-sold-widget .seats-sold').text(gaSeatsSold)\n    $('.ga-seats-sold-widget .seats-left').text(gaSeatTotal - gaSeatsSold)\n    $('.ga-seats-sold-widget .g2').css('stroke-dashoffset', offset)\n    $('.ga-seats-sold-widget .marker').css('transform', `rotate(${rotation}deg)`)\n  }\n\n  $(document).ready(function() {\n    setVIPSeats(getSeatTotals().vipSeatsSold)\n    setGASeats(getSeatTotals().gaSeatsSold)\n  })\n})\n\n$(function() { // Set Info Widgets\n\n  const getWeeksRevenue = () => {\n    let revenue = 0;\n    window.orders.forEach(function(order) {\n      if((order.timestamp - (Date.now() - 604800000)) > 0) {\n        revenue += parseFloat(order.payment_amount)\n      }\n    })\n    return revenue.toFixed(2)\n  }\n\n  const getGARevenue = () => {\n    let revenue = 0;\n    window.orders.forEach(function(order) {\n      order.seats.forEach(function(seat) {\n        if(seat.type != \"VIP\") {\n          revenue += parseFloat(seat.price) + parseFloat(seat.fee)\n        }\n      })\n    })\n    return revenue.toFixed(2)\n  }\n\n  const getVIPRevenue = () => {\n    let revenue = 0;\n    window.orders.forEach(function(order) {\n      order.seats.forEach(function(seat) {\n        if(seat.type === \"VIP\") {\n          revenue += parseFloat(seat.price) + parseFloat(seat.fee)\n        }\n      })\n    })\n    return revenue.toFixed(2)\n  }\n\n  $(document).ready(function() {\n    $('.info-widgets .ga-revenue-widget .info').text(`$${getGARevenue()}`)\n    $('.info-widgets .vip-revenue-widget .info').text(`$${getVIPRevenue()}`)\n    $('.info-widgets .number-of-orders-widget .info').text(window.orders.length)\n    $('.info-widgets .this-weeks-earnings-widget .info').text(`$${getWeeksRevenue()}`)\n  })\n})\n\n// $(function() { // Set Prices Widget\n//   $(document).ready(function() {\n//     $('.seat-prices-widget .ga-seat-price .price-inpt').val(window.seatPrices.gaSeats.toFixed(2))\n//     $('.seat-prices-widget .vip-seat-price .price-inpt').val(window.seatPrices.vipSeats.toFixed(2))\n//     $('.seat-prices-widget .fees-price .price-inpt').val(window.seatPrices.fees.toFixed(2))\n//   })\n// })\n//\n// $('.seat-prices-widget .price-inpt').on('input', function(e) {\n//   console.log(e)\n// })\n//\n// $('.seat-prices-widget .add-btn').click(function() {\n//   let input = $(this).siblings('.price-inpt')\n//   input.val((parseFloat(input.val()) + 1).toFixed(2))\n// })\n//\n// $('.seat-prices-widget .minus-btn').click(function() {\n//   let input = $(this).siblings('.price-inpt')\n//   if(parseFloat(input.val()) - 1 >= 0) {\n//     input.val((parseFloat(input.val()) - 1).toFixed(2))\n//   }\n// })\n//\n// $('.seat-prices-widget .update-prices').click(function() {\n//   let data = {\n//     gaSeats: parseFloat($('.seat-prices-widget .ga-seat-price .price-inpt').val()),\n//     vipSeats: parseFloat($('.seat-prices-widget .vip-seat-price .price-inpt').val()),\n//     fees: parseFloat($('.seat-prices-widget .fees-price .price-inpt').val())\n//   }\n//   $.ajax({\n//     url: '/admin/setSeatPrices',\n//     type: 'post',\n//     data: data,\n//     success: function() {\n//       window.location.reload()\n//     }\n//   })\n// })\n\n$(document).on('click', '.recent-orders .action-btn', function() {\n  window.location.href=`/admin/manage-order/${$(this).attr('data-order')}`\n})\n\n$(function() {\n  $(document).ready(function() {\n    if(window.orders.length === 0) return $('.recent-orders .no-recent-orders').show()\n    window.orders.forEach(function(item, index) {\n      if(index >= 5) {\n        return false;\n      }\n      let orderData = item\n      let seatsHTML = \"\"\n      let price = 0\n      orderData.seats.forEach(function(seat) {\n        seatsHTML+= `<p class=\"pill\">${seat.name}</p>`\n      })\n      $('.recent-orders table tbody').append(`<tr><td><p class=\"customer-info\">${orderData.first_name} ${orderData.last_name}</p></td><td><p class=\"date-info\">${moment(orderData.timestamp).format('MMM DD, YYYY')}</p></td><td><p class=\"price-info\">${orderData.payment_amount == 0 ? 'Free' : '$' + parseFloat(orderData.payment_amount).toFixed(2)}</p></td><td><div class=\"pill-flex-wrap\">${seatsHTML}</td><td><div class=\"action-btn\" data-order=\"${orderData.order_id}\"><div class=\"icon\"></div></div></td></tr>`)\n    })\n  })\n})\n"],"file":"dashboard.js"}