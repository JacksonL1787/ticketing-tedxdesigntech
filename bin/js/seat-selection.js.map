{"version":3,"sources":["seat-selection.js"],"names":["overview","seats","price","seatsPerRow","vipRows","rowNames","createSeats","i","length","console","log","column1","column2","a","classes","includes","push","$","append","join","markTakenSeats","window","takenSeats","forEach","item","addClass","removeClass","setPrice","change","text","html","addSeatInfo","seat","removeSeatInfo","seatNum","each","children","remove","selectSeat","attr","number","hide","hasClass","parseInt","parseFloat","seatPrices","VIP","GA","removeSeat","splice","indexOf","show","selectCurrentSeats","seatData","newDiv","document","createElement","setAttribute","on","ready","click","data","post","url"],"mappings":"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","sourcesContent":["let overview = {\n  seats: [],\n  price: 0\n}\n\nlet seatsPerRow = 30\nlet vipRows = ['A','B','C']\nlet rowNames = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L']\n\nconst createSeats = () => {\n  for(var i = 1; i <= rowNames.length;i++) {\n    console.log(i)\n    let column1 = [],\n        column2 = []\n    for(var a = 1; a <= seatsPerRow;a++) {\n      let classes = vipRows.includes(rowNames[i - 1]) ? 'seat available vip-seat': 'seat available';\n      if(a > seatsPerRow/2) {\n        column2.push(`<div class=\"${classes}\" data-seat=\"${rowNames[i - 1]}${a}\"><div class=\"icon\"></div></div>`)\n      } else {\n        column1.push(`<div class=\"${classes}\" data-seat=\"${rowNames[i - 1]}${a}\"><div class=\"icon\"></div></div>`)\n      }\n    }\n    $('.seat-wrap').append(`<div class=\"row row${i}\"><div class=\"column1 column\">${column1.join(\"\")}</div><p class=\"row-letter\">${rowNames[i - 1]}</p><div class=\"column2 column\">${column2.join(\"\")}</div></div>`)\n  }\n}\n\nconst markTakenSeats = () => {\n  if(window.takenSeats) {\n    window.takenSeats.forEach(function(item) {\n      $(`.seat-wrap .seat[data-seat=\"${item}\"]`).addClass('taken').removeClass('available')\n    })\n  }\n}\n\nconst setPrice = (change) => {\n  overview.price += change\n  if(overview.price <= 0) {\n    $('.purchase-wrap .next-step').addClass('disabled')\n    $('.purchase-wrap p.total').text('No Tickets Selected')\n  } else {\n    $('.purchase-wrap .next-step').removeClass('disabled')\n    $('.purchase-wrap p.total').html(`Total: <span class=\"total-price\">$${overview.price}+ Fees</span>`)\n  }\n}\n\nconst addSeatInfo = (seat, price) => {\n  $('.overview-wrap .seats-wrap').append(`<div class=\"seat-number-wrap\"><p class=\"seat-price\">$${price}</p><p class=\"seat-number\">${seat}</p></div>`)\n}\n\nconst removeSeatInfo = (seat) => {\n  let seatNum = seat\n  $('.overview-wrap .seats-wrap .seat-number-wrap').each(function() {\n    if($(this).children('.seat-number').text() == seatNum) {\n      $(this).remove()\n      return;\n    }\n  })\n}\n\nconst selectSeat = (seat) => {\n  overview.seats.push(seat.attr('data-seat'))\n  let number;\n  $('.seats-wrap .none-selected').hide()\n  if(seat.hasClass('vip-seat')) {\n    number = parseInt($('.vip-tickets-wrap .number-of-tickets .number').text()) + 1\n    $('.vip-tickets-wrap .number-of-tickets .number').text(number)\n    setPrice(parseFloat(window.seatPrices.VIP.price))\n    addSeatInfo(seat.attr('data-seat'), window.seatPrices.VIP.price)\n  } else {\n    number = parseInt($('.ga-tickets-wrap .number-of-tickets .number').text()) + 1\n    $('.ga-tickets-wrap .number-of-tickets .number').text(number)\n    setPrice(parseFloat(window.seatPrices.GA.price))\n    addSeatInfo(seat.attr('data-seat'), window.seatPrices.GA.price)\n  }\n\n}\n\nconst removeSeat = (seat) => {\n  overview.seats.splice(overview.seats.indexOf(seat.attr('data-seat')), 1)\n  if(overview.seats.length == 0) {\n    $('.seats-wrap .none-selected').show()\n  }\n  let number;\n  removeSeatInfo(seat.attr('data-seat'))\n  if(seat.hasClass('vip-seat')) {\n    number = parseInt($('.vip-tickets-wrap .number-of-tickets .number').text()) - 1\n    $('.vip-tickets-wrap .number-of-tickets .number').text(number)\n    setPrice(-parseFloat(window.seatPrices.VIP.price))\n  } else {\n    number = parseInt($('.ga-tickets-wrap .number-of-tickets .number').text()) - 1\n    $('.ga-tickets-wrap .number-of-tickets .number').text(number)\n    setPrice(-parseFloat(window.seatPrices.GA.price))\n  }\n}\n\nconst selectCurrentSeats = () => {\n  if(window.seatData) {\n    window.seatData.seats.forEach(function(item) {\n      let newDiv = document.createElement('div')\n      newDiv.setAttribute('data-seat', item.seat)\n      if(vipRows.includes(item.seat[item.seat.length - 1])) {\n        newDiv.setAttribute('class', 'vip-seat')\n      }\n      $(`.seat-wrap .seat[data-seat=\"${item.seat}\"]`).addClass('selected')\n      selectSeat($(newDiv))\n    })\n  }\n}\n\n$(document).on('click', '.seat', function() {\n  if(!$(this).hasClass('taken')) {\n    if($(this).hasClass('selected')) {\n      $(this).removeClass('selected')\n      removeSeat($(this))\n    } else {\n      $(this).addClass('selected')\n      selectSeat($(this))\n    }\n  }\n})\n\n$(document).ready(function() {\n  createSeats()\n  selectCurrentSeats()\n  markTakenSeats()\n})\n\n$('.next-step').click(function() {\n  if(!$(this).hasClass('disabled')) {\n    let data = {\n      seats: overview.seats\n    }\n    $.post({\n      url: \"/createOrder\",\n      data: data\n    })\n  }\n})\n"],"file":"seat-selection.js"}