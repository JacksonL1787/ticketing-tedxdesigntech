{"version":3,"sources":["seat-selection.js"],"names":["overview","seats","price","seatsPerRow","vipRows","rowNames","createSeats","i","length","column1","column2","a","classes","includes","push","$","append","join","markTakenSeats","window","takenSeats","forEach","s","name","hasClass","addClass","removeClass","setPrice","change","text","html","addSeatInfo","seat","removeSeatInfo","seatNum","each","children","remove","selectSeat","attr","number","hide","parseInt","parseFloat","seatPrices","VIP","GA","removeSeat","splice","indexOf","show","selectCurrentSeats","userSeats","item","newDiv","document","createElement","setAttribute","type","on","ready","click","data","console","log","post","url","success","location","href"],"mappings":"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","sourcesContent":["let overview = {\n  seats: [],\n  price: 0\n}\n\nlet seatsPerRow = 30\nlet vipRows = ['A','B','C']\nlet rowNames = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L']\n\nconst createSeats = () => {\n  for(var i = 1; i <= rowNames.length;i++) {\n    let column1 = [],\n        column2 = []\n    for(var a = 1; a <= seatsPerRow;a++) {\n      let classes = vipRows.includes(rowNames[i - 1]) ? 'seat available vip-seat': 'seat available';\n      if(a > seatsPerRow/2) {\n        column2.push(`<div class=\"${classes}\" data-seat=\"${rowNames[i - 1]}${a}\"><div class=\"icon\"></div></div>`)\n      } else {\n        column1.push(`<div class=\"${classes}\" data-seat=\"${rowNames[i - 1]}${a}\"><div class=\"icon\"></div></div>`)\n      }\n    }\n    $('.seat-wrap').append(`<div class=\"row row${i}\"><div class=\"column1 column\">${column1.join(\"\")}</div><p class=\"row-letter\">${rowNames[i - 1]}</p><div class=\"column2 column\">${column2.join(\"\")}</div></div>`)\n  }\n}\n\nconst markTakenSeats = () => {\n  window.takenSeats.forEach((s, i) => {\n    if(!$(`.seat-wrap .seat[data-seat=\"${s.name}\"]`).hasClass('selected')) {\n      $(`.outer-seat-wrap .seat-wrap .seat[data-seat=\"${s.name}\"]`)\n        .addClass('taken')\n        .removeClass('available')\n    }\n  })\n}\n\n\nconst setPrice = (change) => {\n  overview.price += change\n  if(overview.price <= 0) {\n    $('.purchase-wrap .next-step').addClass('disabled')\n    $('.purchase-wrap p.total').text('No Tickets Selected')\n  } else {\n    $('.purchase-wrap .next-step').removeClass('disabled')\n    $('.purchase-wrap p.total').html(`Total: <span class=\"total-price\">$${overview.price}+ Fees</span>`)\n  }\n}\n\nconst addSeatInfo = (seat, price) => {\n  $('.overview-wrap .seats-wrap').append(`<div class=\"seat-number-wrap\"><p class=\"seat-price\">$${price}</p><p class=\"seat-number\">${seat}</p></div>`)\n}\n\nconst removeSeatInfo = (seat) => {\n  let seatNum = seat\n  $('.overview-wrap .seats-wrap .seat-number-wrap').each(function() {\n    if($(this).children('.seat-number').text() == seatNum) {\n      $(this).remove()\n      return;\n    }\n  })\n}\n\nconst selectSeat = (seat) => {\n  overview.seats.push(seat.attr('data-seat'))\n  let number;\n  $('.seats-wrap .none-selected').hide()\n  if(seat.hasClass('vip-seat')) {\n    number = parseInt($('.vip-tickets-wrap .number-of-tickets .number').text()) + 1\n    $('.vip-tickets-wrap .number-of-tickets .number').text(number)\n    setPrice(parseFloat(window.seatPrices.VIP.price))\n    addSeatInfo(seat.attr('data-seat'), window.seatPrices.VIP.price)\n  } else {\n    number = parseInt($('.ga-tickets-wrap .number-of-tickets .number').text()) + 1\n    $('.ga-tickets-wrap .number-of-tickets .number').text(number)\n    setPrice(parseFloat(window.seatPrices.GA.price))\n    addSeatInfo(seat.attr('data-seat'), window.seatPrices.GA.price)\n  }\n\n}\n\nconst removeSeat = (seat) => {\n  overview.seats.splice(overview.seats.indexOf(seat.attr('data-seat')), 1)\n  if(overview.seats.length == 0) {\n    $('.seats-wrap .none-selected').show()\n  }\n  let number;\n  removeSeatInfo(seat.attr('data-seat'))\n  if(seat.hasClass('vip-seat')) {\n    number = parseInt($('.vip-tickets-wrap .number-of-tickets .number').text()) - 1\n    $('.vip-tickets-wrap .number-of-tickets .number').text(number)\n    setPrice(-parseFloat(window.seatPrices.VIP.price))\n  } else {\n    number = parseInt($('.ga-tickets-wrap .number-of-tickets .number').text()) - 1\n    $('.ga-tickets-wrap .number-of-tickets .number').text(number)\n    setPrice(-parseFloat(window.seatPrices.GA.price))\n  }\n}\n\nconst selectCurrentSeats = () => {\n  if(window.userSeats) {\n    window.userSeats.forEach(function(item) {\n      let newDiv = document.createElement('div')\n      newDiv.setAttribute('data-seat', item.name)\n      if(item.type === \"VIP\") {\n        newDiv.setAttribute('class', 'vip-seat')\n      }\n      $(`.seat-wrap .seat[data-seat=\"${item.name}\"]`).addClass('selected')\n      selectSeat($(newDiv))\n    })\n  }\n}\n\n$(document).on('click', '#main-seats.seat-wrap .seat', function() {\n  if(!$(this).hasClass('taken')) {\n    if($(this).hasClass('selected')) {\n      $(this).removeClass('selected')\n      removeSeat($(this))\n    } else {\n      $(this).addClass('selected')\n      selectSeat($(this))\n    }\n  }\n})\n\n$(document).ready(function() {\n  createSeats()\n  selectCurrentSeats()\n  markTakenSeats()\n})\n\n$('.next-step').click(function() {\n  if(!$(this).hasClass('disabled')) {\n    let data = {\n      seats: overview.seats\n    }\n    console.log(data)\n    $.post({\n      url: \"/api/createOrder\",\n      data: data,\n      success: function(data) {\n        window.location.href=\"/customer/information\"\n      }\n    })\n  }\n})\n"],"file":"seat-selection.js"}