"use strict";var overview={seats:[],price:0},rows=12,seatsPerRow=30,vipRows=["A","B","C"],rowNames=["A","B","C","D","E","F","G","H","I","J","K","L"],createSeats=function(){for(var b=1;b<=rows;b++){console.log(b);for(var c,d=[],e=[],f=1;f<=seatsPerRow;f++)c="seat available",vipRows.includes(rowNames[b-1])&&(c+=" vip-seat"),f>seatsPerRow/2?e.push("<div class=\"".concat(c,"\" data-seat=\"").concat(f).concat(rowNames[b-1],"\"><div class=\"icon\"></div></div>")):d.push("<div class=\"".concat(c,"\" data-seat=\"").concat(f).concat(rowNames[b-1],"\"><div class=\"icon\"></div></div>"));$(".seat-wrap").append("<div class=\"row row".concat(b,"\"><div class=\"column1 column\">").concat(d.join(""),"</div><p class=\"row-letter\">").concat(rowNames[b-1],"</p><div class=\"column2 column\">").concat(e.join(""),"</div></div>"))}},markTakenSeats=function(){window.takenSeats&&window.takenSeats.forEach(function(a){$(".seat-wrap .seat[data-seat=\"".concat(a,"\"]")).addClass("taken").removeClass("available")})},setPrice=function(a){overview.price+=a,0>=overview.price?($(".purchase-wrap .next-step").addClass("disabled"),$(".purchase-wrap p.total").text("No Tickets Selected")):($(".purchase-wrap .next-step").removeClass("disabled"),$(".purchase-wrap p.total").html("Total: <span class=\"total-price\">$".concat(overview.price,"+ Fees</span>")))},addSeatInfo=function(a,b){$(".overview-wrap .seats-wrap").append("<div class=\"seat-number-wrap\"><p class=\"seat-price\">$".concat(b,"</p><p class=\"seat-number\">").concat(a,"</p></div>"))},removeSeatInfo=function(a){$(".overview-wrap .seats-wrap .seat-number-wrap").each(function(){if($(this).children(".seat-number").text()==a)return void $(this).remove()})},selectSeat=function(a){overview.seats.push(a.attr("data-seat"));var b;$(".seats-wrap .none-selected").hide(),a.hasClass("vip-seat")?(b=parseInt($(".vip-tickets-wrap .number-of-tickets .number").text())+1,$(".vip-tickets-wrap .number-of-tickets .number").text(b),setPrice(window.seatPrices.vipSeats),addSeatInfo(a.attr("data-seat"),window.seatPrices.vipSeats)):(b=parseInt($(".ga-tickets-wrap .number-of-tickets .number").text())+1,$(".ga-tickets-wrap .number-of-tickets .number").text(b),setPrice(window.seatPrices.gaSeats),addSeatInfo(a.attr("data-seat"),window.seatPrices.gaSeats))},removeSeat=function(a){overview.seats.splice(overview.seats.indexOf(a.attr("data-seat")),1),0==overview.seats.length&&$(".seats-wrap .none-selected").show();var b;removeSeatInfo(a.attr("data-seat")),a.hasClass("vip-seat")?(b=parseInt($(".vip-tickets-wrap .number-of-tickets .number").text())-1,$(".vip-tickets-wrap .number-of-tickets .number").text(b),setPrice(-window.seatPrices.vipSeats)):(b=parseInt($(".ga-tickets-wrap .number-of-tickets .number").text())-1,$(".ga-tickets-wrap .number-of-tickets .number").text(b),setPrice(-window.seatPrices.gaSeats))},selectCurrentSeats=function(){window.seatData&&window.seatData.seats.forEach(function(a){var b=document.createElement("div");b.setAttribute("data-seat",a.seat),vipRows.includes(a.seat[a.seat.length-1])&&b.setAttribute("class","vip-seat"),$(".seat-wrap .seat[data-seat=\"".concat(a.seat,"\"]")).addClass("selected"),selectSeat($(b))})};$(document).on("click",".seat",function(){$(this).hasClass("taken")||($(this).hasClass("selected")?($(this).removeClass("selected"),removeSeat($(this))):($(this).addClass("selected"),selectSeat($(this))))}),$(document).ready(function(){createSeats(),selectCurrentSeats(),markTakenSeats()}),$(".next-step").click(function(){if(!$(this).hasClass("disabled")){var a={seats:overview.seats};$.post({url:"/createOrder",data:a,success:function success(){window.location.href="/seats/information"}})}}),module.exports=createSeats;