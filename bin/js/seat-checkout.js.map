{"version":3,"sources":["seat-checkout.js"],"names":["price","subTotal","fee","total","stripe","Stripe","addCartItems","window","seatData","forEach","item","tempData","seat","name","attendee_name","seatStatus","type","vipIcon","parseFloat","$","append","setPrice","text","toFixed","failMessage","msg","prepend","setTimeout","remove","document","ready","message","click","get","url","success","sessionId","redirectToCheckout","location","href"],"mappings":"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","sourcesContent":["let price = {\n  subTotal: 0,\n  fee: 0,\n  total: 0\n}\nconst stripe = Stripe('pk_test_OnZ7dgb1twqWB2XAjquTPtTL00BGDKrbP1');\n\nconst addCartItems = () => {\n  window.seatData.forEach((item) => {\n    let tempData = {\n      price: item.price,\n      seat: item.name,\n      name: item.attendee_name,\n      seatStatus: item.type,\n      fee: item.fee\n    }\n    let vipIcon = item.type === \"VIP\" ? '<div class=\"icon\"></div>' : ''\n    price.subTotal+= parseFloat(tempData.price)\n    price.fee+= parseFloat(item.fee)\n    price.total = price.subTotal + price.fee\n    $('.your-cart-info .seats-wrap').append(`<div class=\"seat-wrap\" data-seat=\"${tempData.seat}\"><div class=\"seat\">${vipIcon}</div><div class=\"seat-info\"><p class=\"seat-number\">Seat ${tempData.seat} - <span class=\"seat-status\">${tempData.seatStatus}</span></p><p class=\"seat-name\">${tempData.name}</p></div><p class=\"seat-price\">$${tempData.price}</p></div>`)\n  })\n}\n\nconst setPrice = () => {\n  $('.your-cart-info .subtotal-wrap .charge').text(`$${price.subTotal.toFixed(2)}`)\n  $('.your-cart-info .fees-wrap .charge').text(`$${price.fee.toFixed(2)}`)\n  $('.your-cart-info .total-price').text(`$${price.total.toFixed(2)}`)\n}\n\nconst failMessage = () => {\n  let msg = $(`<div class=\"message-wrap\"><div class=\"message-content\"><div class=\"icon\"></div><p class=\"message\">Your order payment failed.</p></div></div>`)\n  $('.message-container').prepend(msg)\n  setTimeout(() => {\n    $(msg).remove()\n  }, 7000)\n}\n\n$(document).ready(function() {\n  addCartItems()\n  setPrice()\n  if(window.message === \"checkoutFail\") {\n    failMessage()\n  }\n})\n\n$('.payment .purchase-btn').click(function() {\n  $.get({\n    url: '/api/stripe/checkoutSession',\n    success: function(sessionId) {\n      stripe.redirectToCheckout({sessionId})\n    }\n  })\n})\n\n$('.go-back-btn').click(() => {\n  window.location.href=\"/seats/information\"\n})\n"],"file":"seat-checkout.js"}